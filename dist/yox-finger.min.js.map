{"version":3,"file":"yox-finger.min.js","sources":["../src/index.js"],"sourcesContent":["\nconst AlloyFinger = typeof require === 'function'\n    ? require('alloyfinger')\n    : window.AlloyFinger\n\nif (!AlloyFinger) {\n  throw new Error('[yox-finger] cannot locate AlloyFinger.js.')\n}\n\nconst events = [\n  'tap',\n  'doubleTap',\n  'longTap',\n  'singleTap',\n\n  'pinch',\n  'swipe',\n  'multipointStart',\n  'multipointEnd',\n\n  'rotate',\n  'pressMove',\n  'twoFingerPressMove',\n\n  'touchStart',\n  'touchMove',\n  'touchEnd',\n  'touchCancel',\n]\n\n/**\n * 版本\n *\n * @type {string}\n */\nexport const version = process.env.NODE_VERSION\n\nexport function install(Yox) {\n\n  Yox.array.each(\n    events,\n    function (name) {\n      Yox.dom.specialEvents[name] = {\n        on(node, listener) {\n          const finger = node.$finger || (node.$finger = new AlloyFinger(node, {}))\n          finger.on(name, listener)\n        },\n        off(node, listener) {\n\n          const finger = node.$finger\n          finger.off(name, listener)\n\n          // 判断是否还有别的事件监听\n          let hasEvent = false\n\n          Yox.array.each(\n            events,\n            function (event) {\n              const handlers = finger[event] && finger[event].handlers\n              if (!Yox.array.falsy(handlers)) {\n                hasEvent = true\n                return false\n              }\n            }\n          )\n\n          if (!hasEvent) {\n            finger.destroy()\n            node.$finger = null\n          }\n\n        }\n      }\n    }\n  )\n\n}\n"],"names":["const","AlloyFinger","require","window","Error","events","Yox","array","each","name","dom","specialEvents","on","node","listener","$finger","off","finger","let","hasEvent","event","handlers","falsy","destroy"],"mappings":"sMACAA,IAAMC,EAAiC,mBAAZC,QACrBA,QAAQ,eACRC,OAAOF,YAEb,IAAKA,EACH,MAAM,IAAIG,MAAM,8CAGlBJ,IAAMK,EAAS,CACb,MACA,YACA,UACA,YAEA,QACA,QACA,kBACA,gBAEA,SACA,YACA,qBAEA,aACA,YACA,WACA,yBAUK,SAAiBC,GAEtBA,EAAIC,MAAMC,KACRH,EACA,SAAUI,GACRH,EAAII,IAAIC,cAAcF,GAAQ,CAC5BG,YAAGC,EAAMC,IACQD,EAAKE,UAAYF,EAAKE,QAAU,IAAId,EAAYY,EAAM,MAC9DD,GAAGH,EAAMK,IAElBE,aAAIH,EAAMC,GAERd,IAAMiB,EAASJ,EAAKE,QACpBE,EAAOD,IAAIP,EAAMK,GAGjBI,IAAIC,GAAW,EAEfb,EAAIC,MAAMC,KACRH,EACA,SAAUe,GACRpB,IAAMqB,EAAWJ,EAAOG,IAAUH,EAAOG,GAAOC,SAChD,IAAKf,EAAIC,MAAMe,MAAMD,GAEnB,OADAF,GAAW,GACJ,IAKRA,IACHF,EAAOM,UACPV,EAAKE,QAAU,qBAjCJ"}