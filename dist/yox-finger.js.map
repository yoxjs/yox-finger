{"version":3,"file":"yox-finger.js","sources":["../src/index.js"],"sourcesContent":["\nconst AlloyFinger = typeof require === 'function'\n    ? require('alloyfinger')\n    : window.AlloyFinger\n\nif (!AlloyFinger) {\n  throw new Error('[yox-finger] cannot locate AlloyFinger.js.')\n}\n\nconst events = [\n  'tap',\n  'doubleTap',\n  'longTap',\n  'singleTap',\n\n  'pinch',\n  'swipe',\n  'multipointStart',\n  'multipointEnd',\n\n  'rotate',\n  'pressMove',\n  'twoFingerPressMove',\n\n  'touchStart',\n  'touchMove',\n  'touchEnd',\n  'touchCancel',\n]\n\n/**\n * 版本\n *\n * @type {string}\n */\nexport const version = process.env.NODE_VERSION\n\nexport function install(Yox) {\n\n  Yox.array.each(\n    events,\n    function (name) {\n      Yox.dom.addSpecialEvent(name, {\n        on(node, listener) {\n          const finger = node.$finger || (node.$finger = new AlloyFinger(node, {}))\n          finger.on(name, listener)\n        },\n        off(node, listener) {\n\n          const finger = node.$finger\n          finger.off(name, listener)\n\n          // 判断是否还有别的事件监听\n          let hasEvent = false\n\n          Yox.array.each(\n            events,\n            function (event) {\n              const handlers = finger[event] && finger[event].handlers\n              if (!Yox.array.falsy(handlers)) {\n                hasEvent = true\n                return false\n              }\n            }\n          )\n\n          if (!hasEvent) {\n            finger.destroy()\n            node.$finger = null\n          }\n\n        }\n      })\n    }\n  )\n\n}\n"],"names":["const","let"],"mappings":";;;;;;;;;;;;EACAA,IAAM,WAAW,GAAG,OAAO,OAAO,KAAK,UAAU;QAC3C,OAAO,CAAC,aAAa,CAAC;QACtB,MAAM,CAAC,YAAW;;EAExB,IAAI,CAAC,WAAW,EAAE;IAChB,MAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC;GAC9D;;EAEDA,IAAM,MAAM,GAAG;IACb,KAAK;IACL,WAAW;IACX,SAAS;IACT,WAAW;;IAEX,OAAO;IACP,OAAO;IACP,iBAAiB;IACjB,eAAe;;IAEf,QAAQ;IACR,WAAW;IACX,oBAAoB;;IAEpB,YAAY;IACZ,WAAW;IACX,UAAU;IACV,aAAa,GACd;;;;;;;AAOD,AAAY,MAAC,OAAO,GAAG,QAAwB;;AAE/C,EAAO,SAAS,OAAO,CAAC,GAAG,EAAE;;IAE3B,GAAG,CAAC,KAAK,CAAC,IAAI;MACZ,MAAM;MACN,UAAU,IAAI,EAAE;QACd,GAAG,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,EAAE;UAC5B,eAAE,CAAC,IAAI,EAAE,QAAQ,EAAE;YACjBA,IAAM,MAAM,GAAG,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,OAAO,GAAG,IAAI,WAAW,CAAC,IAAI,EAAE,EAAE,CAAC,EAAC;YACzE,MAAM,CAAC,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAC;WAC1B;UACD,iBAAG,CAAC,IAAI,EAAE,QAAQ,EAAE;;YAElBA,IAAM,MAAM,GAAG,IAAI,CAAC,QAAO;YAC3B,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,QAAQ,EAAC;;;YAG1BC,IAAI,QAAQ,GAAG,MAAK;;YAEpB,GAAG,CAAC,KAAK,CAAC,IAAI;cACZ,MAAM;cACN,UAAU,KAAK,EAAE;gBACfD,IAAM,QAAQ,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC,SAAQ;gBACxD,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE;kBAC9B,QAAQ,GAAG,KAAI;kBACf,OAAO,KAAK;iBACb;eACF;cACF;;YAED,IAAI,CAAC,QAAQ,EAAE;cACb,MAAM,CAAC,OAAO,GAAE;cAChB,IAAI,CAAC,OAAO,GAAG,KAAI;aACpB;;WAEF;SACF,EAAC;OACH;MACF;;GAEF;;;;;;;;;;;;;"}